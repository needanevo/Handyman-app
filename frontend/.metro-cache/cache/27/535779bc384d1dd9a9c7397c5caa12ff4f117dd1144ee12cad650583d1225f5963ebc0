{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":49,"index":128}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":129},"end":{"line":3,"column":42,"index":171}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      // Check for stored token on app start\n      checkAuthState();\n    }, []);\n    const checkAuthState = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('accessToken');\n        if (token) {\n          // Set the token in API client\n          _servicesApi.authAPI.setAuthToken(token);\n          await refreshUser();\n        }\n      } catch (error) {\n        console.error('Auth state check failed:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        setIsLoading(true);\n        const response = await _servicesApi.authAPI.login({\n          email,\n          password\n        });\n\n        // Store tokens securely\n        await SecureStore.setItemAsync('accessToken', response.access_token);\n        await SecureStore.setItemAsync('refreshToken', response.refresh_token);\n\n        // Set token in API client\n        _servicesApi.authAPI.setAuthToken(response.access_token);\n\n        // Fetch user data\n        await refreshUser();\n      } catch (error) {\n        console.error('Login failed:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const register = async userData => {\n      try {\n        setIsLoading(true);\n        const response = await _servicesApi.authAPI.register(userData);\n\n        // Store tokens securely\n        await SecureStore.setItemAsync('accessToken', response.access_token);\n        await SecureStore.setItemAsync('refreshToken', response.refresh_token);\n\n        // Set token in API client\n        _servicesApi.authAPI.setAuthToken(response.access_token);\n\n        // Fetch user data\n        await refreshUser();\n      } catch (error) {\n        console.error('Registration failed:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const userData = await _servicesApi.authAPI.getCurrentUser();\n        setUser(userData);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n        // If refresh fails, clear auth state\n        await logout();\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        setIsLoading(true);\n\n        // Clear stored tokens\n        await SecureStore.deleteItemAsync('accessToken');\n        await SecureStore.deleteItemAsync('refreshToken');\n\n        // Clear API token\n        _servicesApi.authAPI.clearAuthToken();\n\n        // Clear user state\n        setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const value = {\n      user,\n      isLoading,\n      isAuthenticated: !!user,\n      login,\n      register,\n      logout,\n      refreshUser\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 10\n    }, this);\n  }\n  _s(AuthProvider, \"YajQB7LURzRD+QP5gw0+K2TZIWA=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":163,"map":[[25,2,48,0,"exports"],[25,9,48,0],[25,10,48,0,"AuthProvider"],[25,22,48,0],[25,25,48,0,"AuthProvider"],[25,37,48,0],[26,2,161,0,"exports"],[26,9,161,0],[26,10,161,0,"useAuth"],[26,17,161,0],[26,20,161,0,"useAuth"],[26,27,161,0],[27,2,1,0],[27,6,1,0,"_react"],[27,12,1,0],[27,15,1,0,"require"],[27,22,1,0],[27,23,1,0,"_dependencyMap"],[27,37,1,0],[28,2,2,0],[28,6,2,0,"_expoSecureStore"],[28,22,2,0],[28,25,2,0,"require"],[28,32,2,0],[28,33,2,0,"_dependencyMap"],[28,47,2,0],[29,2,2,0],[29,6,2,0,"SecureStore"],[29,17,2,0],[29,20,2,0,"_interopNamespace"],[29,37,2,0],[29,38,2,0,"_expoSecureStore"],[29,54,2,0],[30,2,3,0],[30,6,3,0,"_servicesApi"],[30,18,3,0],[30,21,3,0,"require"],[30,28,3,0],[30,29,3,0,"_dependencyMap"],[30,43,3,0],[31,2,3,42],[31,6,3,42,"_reactJsxDevRuntime"],[31,25,3,42],[31,28,3,42,"require"],[31,35,3,42],[31,36,3,42,"_dependencyMap"],[31,50,3,42],[32,2,46,0],[32,8,46,6,"AuthContext"],[32,19,46,17],[32,35,46,20],[32,39,46,20,"createContext"],[32,45,46,33],[32,46,46,33,"createContext"],[32,59,46,33],[32,61,46,63,"undefined"],[32,70,46,72],[32,71,46,73],[33,2,48,7],[33,11,48,16,"AuthProvider"],[33,23,48,28,"AuthProvider"],[33,24,48,29],[34,4,48,31,"children"],[35,2,48,71],[35,3,48,72],[35,5,48,74],[36,4,48,74,"_s"],[36,6,48,74],[37,4,49,2],[37,10,49,8],[37,11,49,9,"user"],[37,15,49,13],[37,17,49,15,"setUser"],[37,24,49,22],[37,25,49,23],[37,28,49,26],[37,32,49,26,"useState"],[37,38,49,34],[37,39,49,34,"useState"],[37,47,49,34],[37,49,49,48],[37,53,49,52],[37,54,49,53],[38,4,50,2],[38,10,50,8],[38,11,50,9,"isLoading"],[38,20,50,18],[38,22,50,20,"setIsLoading"],[38,34,50,32],[38,35,50,33],[38,38,50,36],[38,42,50,36,"useState"],[38,48,50,44],[38,49,50,44,"useState"],[38,57,50,44],[38,59,50,45],[38,63,50,49],[38,64,50,50],[39,4,52,2],[39,8,52,2,"useEffect"],[39,14,52,11],[39,15,52,11,"useEffect"],[39,24,52,11],[39,26,52,12],[39,32,52,18],[40,6,53,4],[41,6,54,4,"checkAuthState"],[41,20,54,18],[41,21,54,19],[41,22,54,20],[42,4,55,2],[42,5,55,3],[42,7,55,5],[42,9,55,7],[42,10,55,8],[43,4,57,2],[43,10,57,8,"checkAuthState"],[43,24,57,22],[43,27,57,25],[43,33,57,25,"checkAuthState"],[43,34,57,25],[43,39,57,37],[44,6,58,4],[44,10,58,8],[45,8,59,6],[45,14,59,12,"token"],[45,19,59,17],[45,22,59,20],[45,28,59,26,"SecureStore"],[45,39,59,37],[45,40,59,38,"getItemAsync"],[45,52,59,50],[45,53,59,51],[45,66,59,64],[45,67,59,65],[46,8,60,6],[46,12,60,10,"token"],[46,17,60,15],[46,19,60,17],[47,10,61,8],[48,10,62,8,"authAPI"],[48,22,62,15],[48,23,62,15,"authAPI"],[48,30,62,15],[48,31,62,16,"setAuthToken"],[48,43,62,28],[48,44,62,29,"token"],[48,49,62,34],[48,50,62,35],[49,10,63,8],[49,16,63,14,"refreshUser"],[49,27,63,25],[49,28,63,26],[49,29,63,27],[50,8,64,6],[51,6,65,4],[51,7,65,5],[51,8,65,6],[51,15,65,13,"error"],[51,20,65,18],[51,22,65,20],[52,8,66,6,"console"],[52,15,66,13],[52,16,66,14,"error"],[52,21,66,19],[52,22,66,20],[52,48,66,46],[52,50,66,48,"error"],[52,55,66,53],[52,56,66,54],[53,6,67,4],[53,7,67,5],[53,16,67,14],[54,8,68,6,"setIsLoading"],[54,20,68,18],[54,21,68,19],[54,26,68,24],[54,27,68,25],[55,6,69,4],[56,4,70,2],[56,5,70,3],[57,4,72,2],[57,10,72,8,"login"],[57,15,72,13],[57,18,72,16],[57,24,72,16,"login"],[57,25,72,23,"email"],[57,30,72,36],[57,32,72,38,"password"],[57,40,72,54],[57,45,72,59],[58,6,73,4],[58,10,73,8],[59,8,74,6,"setIsLoading"],[59,20,74,18],[59,21,74,19],[59,25,74,23],[59,26,74,24],[60,8,75,6],[60,14,75,12,"response"],[60,22,75,20],[60,25,75,23],[60,31,75,29,"authAPI"],[60,43,75,36],[60,44,75,36,"authAPI"],[60,51,75,36],[60,52,75,37,"login"],[60,57,75,42],[60,58,75,43],[61,10,75,45,"email"],[61,15,75,50],[62,10,75,52,"password"],[63,8,75,61],[63,9,75,62],[63,10,75,63],[65,8,77,6],[66,8,78,6],[66,14,78,12,"SecureStore"],[66,25,78,23],[66,26,78,24,"setItemAsync"],[66,38,78,36],[66,39,78,37],[66,52,78,50],[66,54,78,52,"response"],[66,62,78,60],[66,63,78,61,"access_token"],[66,75,78,73],[66,76,78,74],[67,8,79,6],[67,14,79,12,"SecureStore"],[67,25,79,23],[67,26,79,24,"setItemAsync"],[67,38,79,36],[67,39,79,37],[67,53,79,51],[67,55,79,53,"response"],[67,63,79,61],[67,64,79,62,"refresh_token"],[67,77,79,75],[67,78,79,76],[69,8,81,6],[70,8,82,6,"authAPI"],[70,20,82,13],[70,21,82,13,"authAPI"],[70,28,82,13],[70,29,82,14,"setAuthToken"],[70,41,82,26],[70,42,82,27,"response"],[70,50,82,35],[70,51,82,36,"access_token"],[70,63,82,48],[70,64,82,49],[72,8,84,6],[73,8,85,6],[73,14,85,12,"refreshUser"],[73,25,85,23],[73,26,85,24],[73,27,85,25],[74,6,86,4],[74,7,86,5],[74,8,86,6],[74,15,86,13,"error"],[74,20,86,18],[74,22,86,20],[75,8,87,6,"console"],[75,15,87,13],[75,16,87,14,"error"],[75,21,87,19],[75,22,87,20],[75,37,87,35],[75,39,87,37,"error"],[75,44,87,42],[75,45,87,43],[76,8,88,6],[76,14,88,12,"error"],[76,19,88,17],[77,6,89,4],[77,7,89,5],[77,16,89,14],[78,8,90,6,"setIsLoading"],[78,20,90,18],[78,21,90,19],[78,26,90,24],[78,27,90,25],[79,6,91,4],[80,4,92,2],[80,5,92,3],[81,4,94,2],[81,10,94,8,"register"],[81,18,94,16],[81,21,94,19],[81,27,94,26,"userData"],[81,35,94,48],[81,39,94,53],[82,6,95,4],[82,10,95,8],[83,8,96,6,"setIsLoading"],[83,20,96,18],[83,21,96,19],[83,25,96,23],[83,26,96,24],[84,8,97,6],[84,14,97,12,"response"],[84,22,97,20],[84,25,97,23],[84,31,97,29,"authAPI"],[84,43,97,36],[84,44,97,36,"authAPI"],[84,51,97,36],[84,52,97,37,"register"],[84,60,97,45],[84,61,97,46,"userData"],[84,69,97,54],[84,70,97,55],[86,8,99,6],[87,8,100,6],[87,14,100,12,"SecureStore"],[87,25,100,23],[87,26,100,24,"setItemAsync"],[87,38,100,36],[87,39,100,37],[87,52,100,50],[87,54,100,52,"response"],[87,62,100,60],[87,63,100,61,"access_token"],[87,75,100,73],[87,76,100,74],[88,8,101,6],[88,14,101,12,"SecureStore"],[88,25,101,23],[88,26,101,24,"setItemAsync"],[88,38,101,36],[88,39,101,37],[88,53,101,51],[88,55,101,53,"response"],[88,63,101,61],[88,64,101,62,"refresh_token"],[88,77,101,75],[88,78,101,76],[90,8,103,6],[91,8,104,6,"authAPI"],[91,20,104,13],[91,21,104,13,"authAPI"],[91,28,104,13],[91,29,104,14,"setAuthToken"],[91,41,104,26],[91,42,104,27,"response"],[91,50,104,35],[91,51,104,36,"access_token"],[91,63,104,48],[91,64,104,49],[93,8,106,6],[94,8,107,6],[94,14,107,12,"refreshUser"],[94,25,107,23],[94,26,107,24],[94,27,107,25],[95,6,108,4],[95,7,108,5],[95,8,108,6],[95,15,108,13,"error"],[95,20,108,18],[95,22,108,20],[96,8,109,6,"console"],[96,15,109,13],[96,16,109,14,"error"],[96,21,109,19],[96,22,109,20],[96,44,109,42],[96,46,109,44,"error"],[96,51,109,49],[96,52,109,50],[97,8,110,6],[97,14,110,12,"error"],[97,19,110,17],[98,6,111,4],[98,7,111,5],[98,16,111,14],[99,8,112,6,"setIsLoading"],[99,20,112,18],[99,21,112,19],[99,26,112,24],[99,27,112,25],[100,6,113,4],[101,4,114,2],[101,5,114,3],[102,4,116,2],[102,10,116,8,"refreshUser"],[102,21,116,19],[102,24,116,22],[102,30,116,22,"refreshUser"],[102,31,116,22],[102,36,116,34],[103,6,117,4],[103,10,117,8],[104,8,118,6],[104,14,118,12,"userData"],[104,22,118,20],[104,25,118,23],[104,31,118,29,"authAPI"],[104,43,118,36],[104,44,118,36,"authAPI"],[104,51,118,36],[104,52,118,37,"getCurrentUser"],[104,66,118,51],[104,67,118,52],[104,68,118,53],[105,8,119,6,"setUser"],[105,15,119,13],[105,16,119,14,"userData"],[105,24,119,22],[105,25,119,23],[106,6,120,4],[106,7,120,5],[106,8,120,6],[106,15,120,13,"error"],[106,20,120,18],[106,22,120,20],[107,8,121,6,"console"],[107,15,121,13],[107,16,121,14,"error"],[107,21,121,19],[107,22,121,20],[107,47,121,45],[107,49,121,47,"error"],[107,54,121,52],[107,55,121,53],[108,8,122,6],[109,8,123,6],[109,14,123,12,"logout"],[109,20,123,18],[109,21,123,19],[109,22,123,20],[110,8,124,6],[110,14,124,12,"error"],[110,19,124,17],[111,6,125,4],[112,4,126,2],[112,5,126,3],[113,4,128,2],[113,10,128,8,"logout"],[113,16,128,14],[113,19,128,17],[113,25,128,17,"logout"],[113,26,128,17],[113,31,128,29],[114,6,129,4],[114,10,129,8],[115,8,130,6,"setIsLoading"],[115,20,130,18],[115,21,130,19],[115,25,130,23],[115,26,130,24],[117,8,132,6],[118,8,133,6],[118,14,133,12,"SecureStore"],[118,25,133,23],[118,26,133,24,"deleteItemAsync"],[118,41,133,39],[118,42,133,40],[118,55,133,53],[118,56,133,54],[119,8,134,6],[119,14,134,12,"SecureStore"],[119,25,134,23],[119,26,134,24,"deleteItemAsync"],[119,41,134,39],[119,42,134,40],[119,56,134,54],[119,57,134,55],[121,8,136,6],[122,8,137,6,"authAPI"],[122,20,137,13],[122,21,137,13,"authAPI"],[122,28,137,13],[122,29,137,14,"clearAuthToken"],[122,43,137,28],[122,44,137,29],[122,45,137,30],[124,8,139,6],[125,8,140,6,"setUser"],[125,15,140,13],[125,16,140,14],[125,20,140,18],[125,21,140,19],[126,6,141,4],[126,7,141,5],[126,8,141,6],[126,15,141,13,"error"],[126,20,141,18],[126,22,141,20],[127,8,142,6,"console"],[127,15,142,13],[127,16,142,14,"error"],[127,21,142,19],[127,22,142,20],[127,38,142,36],[127,40,142,38,"error"],[127,45,142,43],[127,46,142,44],[128,6,143,4],[128,7,143,5],[128,16,143,14],[129,8,144,6,"setIsLoading"],[129,20,144,18],[129,21,144,19],[129,26,144,24],[129,27,144,25],[130,6,145,4],[131,4,146,2],[131,5,146,3],[132,4,148,2],[132,10,148,8,"value"],[132,15,148,30],[132,18,148,33],[133,6,149,4,"user"],[133,10,149,8],[134,6,150,4,"isLoading"],[134,15,150,13],[135,6,151,4,"isAuthenticated"],[135,21,151,19],[135,23,151,21],[135,24,151,22],[135,25,151,23,"user"],[135,29,151,27],[136,6,152,4,"login"],[136,11,152,9],[137,6,153,4,"register"],[137,14,153,12],[138,6,154,4,"logout"],[138,12,154,10],[139,6,155,4,"refreshUser"],[140,4,156,2],[140,5,156,3],[141,4,158,2],[141,24,158,9],[141,28,158,9,"_reactJsxDevRuntime"],[141,47,158,9],[141,48,158,9,"jsxDEV"],[141,54,158,9],[141,56,158,10,"AuthContext"],[141,67,158,21],[141,68,158,22,"Provider"],[141,76,158,30],[142,6,158,31,"value"],[142,11,158,36],[142,13,158,38,"value"],[142,18,158,44],[143,6,158,44,"children"],[143,14,158,44],[143,16,158,46,"children"],[144,4,158,54],[145,6,158,54,"fileName"],[145,14,158,54],[145,16,158,54,"_jsxFileName"],[145,28,158,54],[146,6,158,54,"lineNumber"],[146,16,158,54],[147,6,158,54,"columnNumber"],[147,18,158,54],[148,4,158,54],[148,11,158,77],[148,12,158,78],[149,2,159,0],[150,2,159,1,"_s"],[150,4,159,1],[150,5,48,16,"AuthProvider"],[150,17,48,28],[151,2,48,28,"_c"],[151,4,48,28],[151,7,48,16,"AuthProvider"],[151,19,48,28],[152,2,161,7],[152,11,161,16,"useAuth"],[152,18,161,23,"useAuth"],[152,19,161,23],[152,21,161,26],[153,4,161,26,"_s2"],[153,7,161,26],[154,4,162,2],[154,10,162,8,"context"],[154,17,162,15],[154,20,162,18],[154,24,162,18,"useContext"],[154,30,162,28],[154,31,162,28,"useContext"],[154,41,162,28],[154,43,162,29,"AuthContext"],[154,54,162,40],[154,55,162,41],[155,4,163,2],[155,8,163,6,"context"],[155,15,163,13],[155,20,163,18,"undefined"],[155,29,163,27],[155,31,163,29],[156,6,164,4],[156,12,164,10],[156,16,164,14,"Error"],[156,21,164,19],[156,22,164,20],[156,67,164,65],[156,68,164,66],[157,4,165,2],[158,4,166,2],[158,11,166,9,"context"],[158,18,166,16],[159,2,167,0],[160,2,167,1,"_s2"],[160,5,167,1],[160,6,161,16,"useAuth"],[160,13,161,23],[161,2,161,23],[161,6,161,23,"_c"],[161,8,161,23],[162,2,161,23,"$RefreshReg$"],[162,14,161,23],[162,15,161,23,"_c"],[162,17,161,23],[163,0,161,23],[163,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthState","login","register","refreshUser","logout","useAuth"],"mappings":"AAA;OC+C;YCI;GDG;yBEE;GFa;gBGE;GHoB;mBIE;GJoB;sBKE;GLU;iBME;GNkB;CDa;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}