{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":49,"index":128}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":129},"end":{"line":3,"column":42,"index":171}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _expoSecureStore = require(_dependencyMap[1], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      // Check for stored token on app start\n      checkAuthState();\n    }, []);\n    const checkAuthState = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('accessToken');\n        if (token) {\n          // Set the token in API client\n          _servicesApi.authAPI.setAuthToken(token);\n          await refreshUser();\n        }\n      } catch (error) {\n        console.error('Auth state check failed:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        setIsLoading(true);\n        const response = await _servicesApi.authAPI.login({\n          email,\n          password\n        });\n\n        // Store tokens securely\n        await SecureStore.setItemAsync('accessToken', response.access_token);\n        await SecureStore.setItemAsync('refreshToken', response.refresh_token);\n\n        // Set token in API client\n        _servicesApi.authAPI.setAuthToken(response.access_token);\n\n        // Fetch user data\n        await refreshUser();\n      } catch (error) {\n        console.error('Login failed:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const register = async userData => {\n      try {\n        setIsLoading(true);\n        const response = await _servicesApi.authAPI.register(userData);\n\n        // Store tokens securely\n        await SecureStore.setItemAsync('accessToken', response.access_token);\n        await SecureStore.setItemAsync('refreshToken', response.refresh_token);\n\n        // Set token in API client\n        _servicesApi.authAPI.setAuthToken(response.access_token);\n\n        // Fetch user data\n        await refreshUser();\n      } catch (error) {\n        console.error('Registration failed:', error);\n        throw error;\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const userData = await _servicesApi.authAPI.getCurrentUser();\n        setUser(userData);\n      } catch (error) {\n        console.error('Failed to refresh user:', error);\n        // If refresh fails, clear auth state\n        await logout();\n        throw error;\n      }\n    };\n    const logout = async () => {\n      try {\n        setIsLoading(true);\n\n        // Clear stored tokens\n        await SecureStore.deleteItemAsync('accessToken');\n        await SecureStore.deleteItemAsync('refreshToken');\n\n        // Clear API token\n        _servicesApi.authAPI.clearAuthToken();\n\n        // Clear user state\n        setUser(null);\n      } catch (error) {\n        console.error('Logout failed:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const value = {\n      user,\n      isLoading,\n      isAuthenticated: !!user,\n      login,\n      register,\n      logout,\n      refreshUser\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: value,\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 10\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":154,"map":[[23,2,48,0,"exports"],[23,9,48,0],[23,10,48,0,"AuthProvider"],[23,22,48,0],[23,25,48,0,"AuthProvider"],[23,37,48,0],[24,2,161,0,"exports"],[24,9,161,0],[24,10,161,0,"useAuth"],[24,17,161,0],[24,20,161,0,"useAuth"],[24,27,161,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_expoSecureStore"],[26,22,2,0],[26,25,2,0,"require"],[26,32,2,0],[26,33,2,0,"_dependencyMap"],[26,47,2,0],[27,2,2,0],[27,6,2,0,"SecureStore"],[27,17,2,0],[27,20,2,0,"_interopNamespace"],[27,37,2,0],[27,38,2,0,"_expoSecureStore"],[27,54,2,0],[28,2,3,0],[28,6,3,0,"_servicesApi"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,42],[29,6,3,42,"_reactJsxDevRuntime"],[29,25,3,42],[29,28,3,42,"require"],[29,35,3,42],[29,36,3,42,"_dependencyMap"],[29,50,3,42],[30,2,46,0],[30,8,46,6,"AuthContext"],[30,19,46,17],[30,35,46,20],[30,39,46,20,"createContext"],[30,45,46,33],[30,46,46,33,"createContext"],[30,59,46,33],[30,61,46,63,"undefined"],[30,70,46,72],[30,71,46,73],[31,2,48,7],[31,11,48,16,"AuthProvider"],[31,23,48,28,"AuthProvider"],[31,24,48,29],[32,4,48,31,"children"],[33,2,48,71],[33,3,48,72],[33,5,48,74],[34,4,49,2],[34,10,49,8],[34,11,49,9,"user"],[34,15,49,13],[34,17,49,15,"setUser"],[34,24,49,22],[34,25,49,23],[34,28,49,26],[34,32,49,26,"useState"],[34,38,49,34],[34,39,49,34,"useState"],[34,47,49,34],[34,49,49,48],[34,53,49,52],[34,54,49,53],[35,4,50,2],[35,10,50,8],[35,11,50,9,"isLoading"],[35,20,50,18],[35,22,50,20,"setIsLoading"],[35,34,50,32],[35,35,50,33],[35,38,50,36],[35,42,50,36,"useState"],[35,48,50,44],[35,49,50,44,"useState"],[35,57,50,44],[35,59,50,45],[35,63,50,49],[35,64,50,50],[36,4,52,2],[36,8,52,2,"useEffect"],[36,14,52,11],[36,15,52,11,"useEffect"],[36,24,52,11],[36,26,52,12],[36,32,52,18],[37,6,53,4],[38,6,54,4,"checkAuthState"],[38,20,54,18],[38,21,54,19],[38,22,54,20],[39,4,55,2],[39,5,55,3],[39,7,55,5],[39,9,55,7],[39,10,55,8],[40,4,57,2],[40,10,57,8,"checkAuthState"],[40,24,57,22],[40,27,57,25],[40,33,57,25,"checkAuthState"],[40,34,57,25],[40,39,57,37],[41,6,58,4],[41,10,58,8],[42,8,59,6],[42,14,59,12,"token"],[42,19,59,17],[42,22,59,20],[42,28,59,26,"SecureStore"],[42,39,59,37],[42,40,59,38,"getItemAsync"],[42,52,59,50],[42,53,59,51],[42,66,59,64],[42,67,59,65],[43,8,60,6],[43,12,60,10,"token"],[43,17,60,15],[43,19,60,17],[44,10,61,8],[45,10,62,8,"authAPI"],[45,22,62,15],[45,23,62,15,"authAPI"],[45,30,62,15],[45,31,62,16,"setAuthToken"],[45,43,62,28],[45,44,62,29,"token"],[45,49,62,34],[45,50,62,35],[46,10,63,8],[46,16,63,14,"refreshUser"],[46,27,63,25],[46,28,63,26],[46,29,63,27],[47,8,64,6],[48,6,65,4],[48,7,65,5],[48,8,65,6],[48,15,65,13,"error"],[48,20,65,18],[48,22,65,20],[49,8,66,6,"console"],[49,15,66,13],[49,16,66,14,"error"],[49,21,66,19],[49,22,66,20],[49,48,66,46],[49,50,66,48,"error"],[49,55,66,53],[49,56,66,54],[50,6,67,4],[50,7,67,5],[50,16,67,14],[51,8,68,6,"setIsLoading"],[51,20,68,18],[51,21,68,19],[51,26,68,24],[51,27,68,25],[52,6,69,4],[53,4,70,2],[53,5,70,3],[54,4,72,2],[54,10,72,8,"login"],[54,15,72,13],[54,18,72,16],[54,24,72,16,"login"],[54,25,72,23,"email"],[54,30,72,36],[54,32,72,38,"password"],[54,40,72,54],[54,45,72,59],[55,6,73,4],[55,10,73,8],[56,8,74,6,"setIsLoading"],[56,20,74,18],[56,21,74,19],[56,25,74,23],[56,26,74,24],[57,8,75,6],[57,14,75,12,"response"],[57,22,75,20],[57,25,75,23],[57,31,75,29,"authAPI"],[57,43,75,36],[57,44,75,36,"authAPI"],[57,51,75,36],[57,52,75,37,"login"],[57,57,75,42],[57,58,75,43],[58,10,75,45,"email"],[58,15,75,50],[59,10,75,52,"password"],[60,8,75,61],[60,9,75,62],[60,10,75,63],[62,8,77,6],[63,8,78,6],[63,14,78,12,"SecureStore"],[63,25,78,23],[63,26,78,24,"setItemAsync"],[63,38,78,36],[63,39,78,37],[63,52,78,50],[63,54,78,52,"response"],[63,62,78,60],[63,63,78,61,"access_token"],[63,75,78,73],[63,76,78,74],[64,8,79,6],[64,14,79,12,"SecureStore"],[64,25,79,23],[64,26,79,24,"setItemAsync"],[64,38,79,36],[64,39,79,37],[64,53,79,51],[64,55,79,53,"response"],[64,63,79,61],[64,64,79,62,"refresh_token"],[64,77,79,75],[64,78,79,76],[66,8,81,6],[67,8,82,6,"authAPI"],[67,20,82,13],[67,21,82,13,"authAPI"],[67,28,82,13],[67,29,82,14,"setAuthToken"],[67,41,82,26],[67,42,82,27,"response"],[67,50,82,35],[67,51,82,36,"access_token"],[67,63,82,48],[67,64,82,49],[69,8,84,6],[70,8,85,6],[70,14,85,12,"refreshUser"],[70,25,85,23],[70,26,85,24],[70,27,85,25],[71,6,86,4],[71,7,86,5],[71,8,86,6],[71,15,86,13,"error"],[71,20,86,18],[71,22,86,20],[72,8,87,6,"console"],[72,15,87,13],[72,16,87,14,"error"],[72,21,87,19],[72,22,87,20],[72,37,87,35],[72,39,87,37,"error"],[72,44,87,42],[72,45,87,43],[73,8,88,6],[73,14,88,12,"error"],[73,19,88,17],[74,6,89,4],[74,7,89,5],[74,16,89,14],[75,8,90,6,"setIsLoading"],[75,20,90,18],[75,21,90,19],[75,26,90,24],[75,27,90,25],[76,6,91,4],[77,4,92,2],[77,5,92,3],[78,4,94,2],[78,10,94,8,"register"],[78,18,94,16],[78,21,94,19],[78,27,94,26,"userData"],[78,35,94,48],[78,39,94,53],[79,6,95,4],[79,10,95,8],[80,8,96,6,"setIsLoading"],[80,20,96,18],[80,21,96,19],[80,25,96,23],[80,26,96,24],[81,8,97,6],[81,14,97,12,"response"],[81,22,97,20],[81,25,97,23],[81,31,97,29,"authAPI"],[81,43,97,36],[81,44,97,36,"authAPI"],[81,51,97,36],[81,52,97,37,"register"],[81,60,97,45],[81,61,97,46,"userData"],[81,69,97,54],[81,70,97,55],[83,8,99,6],[84,8,100,6],[84,14,100,12,"SecureStore"],[84,25,100,23],[84,26,100,24,"setItemAsync"],[84,38,100,36],[84,39,100,37],[84,52,100,50],[84,54,100,52,"response"],[84,62,100,60],[84,63,100,61,"access_token"],[84,75,100,73],[84,76,100,74],[85,8,101,6],[85,14,101,12,"SecureStore"],[85,25,101,23],[85,26,101,24,"setItemAsync"],[85,38,101,36],[85,39,101,37],[85,53,101,51],[85,55,101,53,"response"],[85,63,101,61],[85,64,101,62,"refresh_token"],[85,77,101,75],[85,78,101,76],[87,8,103,6],[88,8,104,6,"authAPI"],[88,20,104,13],[88,21,104,13,"authAPI"],[88,28,104,13],[88,29,104,14,"setAuthToken"],[88,41,104,26],[88,42,104,27,"response"],[88,50,104,35],[88,51,104,36,"access_token"],[88,63,104,48],[88,64,104,49],[90,8,106,6],[91,8,107,6],[91,14,107,12,"refreshUser"],[91,25,107,23],[91,26,107,24],[91,27,107,25],[92,6,108,4],[92,7,108,5],[92,8,108,6],[92,15,108,13,"error"],[92,20,108,18],[92,22,108,20],[93,8,109,6,"console"],[93,15,109,13],[93,16,109,14,"error"],[93,21,109,19],[93,22,109,20],[93,44,109,42],[93,46,109,44,"error"],[93,51,109,49],[93,52,109,50],[94,8,110,6],[94,14,110,12,"error"],[94,19,110,17],[95,6,111,4],[95,7,111,5],[95,16,111,14],[96,8,112,6,"setIsLoading"],[96,20,112,18],[96,21,112,19],[96,26,112,24],[96,27,112,25],[97,6,113,4],[98,4,114,2],[98,5,114,3],[99,4,116,2],[99,10,116,8,"refreshUser"],[99,21,116,19],[99,24,116,22],[99,30,116,22,"refreshUser"],[99,31,116,22],[99,36,116,34],[100,6,117,4],[100,10,117,8],[101,8,118,6],[101,14,118,12,"userData"],[101,22,118,20],[101,25,118,23],[101,31,118,29,"authAPI"],[101,43,118,36],[101,44,118,36,"authAPI"],[101,51,118,36],[101,52,118,37,"getCurrentUser"],[101,66,118,51],[101,67,118,52],[101,68,118,53],[102,8,119,6,"setUser"],[102,15,119,13],[102,16,119,14,"userData"],[102,24,119,22],[102,25,119,23],[103,6,120,4],[103,7,120,5],[103,8,120,6],[103,15,120,13,"error"],[103,20,120,18],[103,22,120,20],[104,8,121,6,"console"],[104,15,121,13],[104,16,121,14,"error"],[104,21,121,19],[104,22,121,20],[104,47,121,45],[104,49,121,47,"error"],[104,54,121,52],[104,55,121,53],[105,8,122,6],[106,8,123,6],[106,14,123,12,"logout"],[106,20,123,18],[106,21,123,19],[106,22,123,20],[107,8,124,6],[107,14,124,12,"error"],[107,19,124,17],[108,6,125,4],[109,4,126,2],[109,5,126,3],[110,4,128,2],[110,10,128,8,"logout"],[110,16,128,14],[110,19,128,17],[110,25,128,17,"logout"],[110,26,128,17],[110,31,128,29],[111,6,129,4],[111,10,129,8],[112,8,130,6,"setIsLoading"],[112,20,130,18],[112,21,130,19],[112,25,130,23],[112,26,130,24],[114,8,132,6],[115,8,133,6],[115,14,133,12,"SecureStore"],[115,25,133,23],[115,26,133,24,"deleteItemAsync"],[115,41,133,39],[115,42,133,40],[115,55,133,53],[115,56,133,54],[116,8,134,6],[116,14,134,12,"SecureStore"],[116,25,134,23],[116,26,134,24,"deleteItemAsync"],[116,41,134,39],[116,42,134,40],[116,56,134,54],[116,57,134,55],[118,8,136,6],[119,8,137,6,"authAPI"],[119,20,137,13],[119,21,137,13,"authAPI"],[119,28,137,13],[119,29,137,14,"clearAuthToken"],[119,43,137,28],[119,44,137,29],[119,45,137,30],[121,8,139,6],[122,8,140,6,"setUser"],[122,15,140,13],[122,16,140,14],[122,20,140,18],[122,21,140,19],[123,6,141,4],[123,7,141,5],[123,8,141,6],[123,15,141,13,"error"],[123,20,141,18],[123,22,141,20],[124,8,142,6,"console"],[124,15,142,13],[124,16,142,14,"error"],[124,21,142,19],[124,22,142,20],[124,38,142,36],[124,40,142,38,"error"],[124,45,142,43],[124,46,142,44],[125,6,143,4],[125,7,143,5],[125,16,143,14],[126,8,144,6,"setIsLoading"],[126,20,144,18],[126,21,144,19],[126,26,144,24],[126,27,144,25],[127,6,145,4],[128,4,146,2],[128,5,146,3],[129,4,148,2],[129,10,148,8,"value"],[129,15,148,30],[129,18,148,33],[130,6,149,4,"user"],[130,10,149,8],[131,6,150,4,"isLoading"],[131,15,150,13],[132,6,151,4,"isAuthenticated"],[132,21,151,19],[132,23,151,21],[132,24,151,22],[132,25,151,23,"user"],[132,29,151,27],[133,6,152,4,"login"],[133,11,152,9],[134,6,153,4,"register"],[134,14,153,12],[135,6,154,4,"logout"],[135,12,154,10],[136,6,155,4,"refreshUser"],[137,4,156,2],[137,5,156,3],[138,4,158,2],[138,24,158,9],[138,28,158,9,"_reactJsxDevRuntime"],[138,47,158,9],[138,48,158,9,"jsxDEV"],[138,54,158,9],[138,56,158,10,"AuthContext"],[138,67,158,21],[138,68,158,22,"Provider"],[138,76,158,30],[139,6,158,31,"value"],[139,11,158,36],[139,13,158,38,"value"],[139,18,158,44],[140,6,158,44,"children"],[140,14,158,44],[140,16,158,46,"children"],[141,4,158,54],[142,6,158,54,"fileName"],[142,14,158,54],[142,16,158,54,"_jsxFileName"],[142,28,158,54],[143,6,158,54,"lineNumber"],[143,16,158,54],[144,6,158,54,"columnNumber"],[144,18,158,54],[145,4,158,54],[145,11,158,77],[145,12,158,78],[146,2,159,0],[147,2,161,7],[147,11,161,16,"useAuth"],[147,18,161,23,"useAuth"],[147,19,161,23],[147,21,161,26],[148,4,162,2],[148,10,162,8,"context"],[148,17,162,15],[148,20,162,18],[148,24,162,18,"useContext"],[148,30,162,28],[148,31,162,28,"useContext"],[148,41,162,28],[148,43,162,29,"AuthContext"],[148,54,162,40],[148,55,162,41],[149,4,163,2],[149,8,163,6,"context"],[149,15,163,13],[149,20,163,18,"undefined"],[149,29,163,27],[149,31,163,29],[150,6,164,4],[150,12,164,10],[150,16,164,14,"Error"],[150,21,164,19],[150,22,164,20],[150,67,164,65],[150,68,164,66],[151,4,165,2],[152,4,166,2],[152,11,166,9,"context"],[152,18,166,16],[153,2,167,0],[154,0,167,1],[154,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","checkAuthState","login","register","refreshUser","logout","useAuth"],"mappings":"AAA;OC+C;YCI;GDG;yBEE;GFa;gBGE;GHoB;mBIE;GJoB;sBKE;GLU;iBME;GNkB;CDa;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}