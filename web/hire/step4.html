<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Step 4: Budget & Timing | The Real Johnson</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="hire-container">
        <header class="hire-header">
            <h1 class="hire-logo">The Real Johnson - Hire a Pro</h1>
            <a href="../" class="back-link">← Back to Home</a>
        </header>

        <div class="progress-bar">
            <div class="progress-step completed">1</div>
            <div class="progress-line completed"></div>
            <div class="progress-step completed">2</div>
            <div class="progress-line completed"></div>
            <div class="progress-step completed">3</div>
            <div class="progress-line completed"></div>
            <div class="progress-step active">4</div>
        </div>

        <div class="step-content">
            <h2 class="step-title">Step 4 of 4: Budget & Timing</h2>
            <p class="step-description">Help workers understand your budget and schedule expectations.</p>

            <form id="step4-form" class="hire-form">
                <div class="form-group">
                    <label>Budget Range (Optional)</label>
                    <p class="form-hint">Provide an estimated budget range to help workers tailor their proposals.</p>
                    <div class="form-row">
                        <div class="form-group">
                            <input type="number" id="budgetMin" name="budgetMin" class="form-control" placeholder="Min ($)" min="0">
                        </div>
                        <div class="form-group">
                            <input type="number" id="budgetMax" name="budgetMax" class="form-control" placeholder="Max ($)" min="0">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="urgency">How soon do you need this done? *</label>
                    <select id="urgency" name="urgency" required class="form-control">
                        <option value="">Select urgency...</option>
                        <option value="Low">Flexible - Whenever works</option>
                        <option value="Medium">Within 1-2 weeks</option>
                        <option value="High">ASAP - Within a few days</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="timing">Preferred Timing Details</label>
                    <textarea id="timing" name="timing" class="form-control" rows="3" placeholder="Any specific days, times, or scheduling preferences?"></textarea>
                </div>

                <div class="form-group">
                    <label for="contractor-preference">Worker Preference</label>
                    <select id="contractor-preference" name="contractorPreference" class="form-control">
                        <option value="no_preference">No preference</option>
                        <option value="handyman">Handyman (usually lower cost, no license required)</option>
                        <option value="licensed">Licensed Contractor (higher cost, fully licensed & insured)</option>
                    </select>
                    <small class="form-hint">We'll show your job to the type of worker you prefer.</small>
                </div>

                <div class="form-actions">
                    <a href="step3.html" class="btn btn-secondary">← Back</a>
                    <button type="submit" class="btn btn-primary">Review & Confirm →</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Load existing draft if any
        const draft = loadDraft();
        if (draft.budgetMin) document.getElementById('budgetMin').value = draft.budgetMin;
        if (draft.budgetMax) document.getElementById('budgetMax').value = draft.budgetMax;
        if (draft.urgency) document.getElementById('urgency').value = draft.urgency;
        if (draft.timing) document.getElementById('timing').value = draft.timing;
        if (draft.contractorPreference) document.getElementById('contractor-preference').value = draft.contractorPreference;

        // Handle form submission
        document.getElementById('step4-form').addEventListener('submit', function(e) {
            e.preventDefault();

            const formData = {
                budgetMin: document.getElementById('budgetMin').value,
                budgetMax: document.getElementById('budgetMax').value,
                urgency: document.getElementById('urgency').value,
                timing: document.getElementById('timing').value,
                contractorPreference: document.getElementById('contractor-preference').value
            };

            saveDraft(formData);
            window.location.href = 'confirmation.html';
        });
    </script>
</body>
</html>
